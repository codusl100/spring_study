## 02 | 객체 지향 원리 적용

[1. AppConfig](#appconfig) <br>
[2. 좋은 객체 지향 설계의 5가지 원칙의 적용](#좋은-객체-지향-설계의-5가지-원칙의-적용) <br>
[3. Ioc, DI, 컨테이너](#ioc-di-컨테이너) <br>
[4. 스프링으로 전환하기](#스프링으로-전환하기) 

<br>

### AppConfig
<hr>

- 구현체가 절대로 다른 구현체를 선택하는 일은 없어야 하고 어떤 구현체를 선택할지는 별도의 클라이언트가 정해야함
- 애플리케이션의 전체 동작 방식을 구성하기 위해 **구현 객체를 생성하고, 연결하는 책임을 가지는 별도의 설정 클래스**
    - 인터페이스의 이름으로 된 public method를 생성한 후 return 부분에 객체를 생성
    - parameter 안에 원하는 구현체를 넣어주고 이후에 레퍼런스를 생성자를 통하여 주입
- 관심사의 분리 
    - 객체를 생성하고 연결하는 역할과 실행하는 역할이 명확히 분리
- AppConfig는 공연 기획자로, 구체 클래스(= 배역에 맞는 담당 배우)를 선택하여 애플리케이션이 어떻게 동작해야 할지 전체 구성을 책임

<br>

### 좋은 객체 지향 설계의 5가지 원칙의 적용
<hr>

- SRP 단일 책임 원칙
    - 한 클래스는 하나의 책임만 가져야 한다.
        > 클라이언트 객체는 직접 구현 객체를 생성/연결/실행하는 다양한 책임을 가짐
        >
        > SRP 단일 책임 원칙을 따르면서 관심사를 분리함
        >
        > 구현 객체를 생성하고 연결하는 책임은 AppConfig가 담당
        >
        > 클라이언트 객체는 실행하는 책임만 담당
- DIP 의존관계 역전 원칙
    - 프로그래머는 "추상화에 의존해야지, 구체화에 의존하면 안된다."
    - 의존성 주입은 이 원칙을 따르는 방법 중 하나
        > AppConfig가 객체 인스턴스를 생성하여 클라이언트 코드에 의존관계를 주입
- OCP
    - 소프트웨어 요소는 확장에 열려 있으나 변경에는 닫혀 있어야 한다.
        > 다형성 사용하고 클라이언트가 DIP를 지킴
        >
        > 애플리케이션을 사용/구성 영역으로 나눔
        >
        > SW 요소를 새롭게 확장해도 사용 영역의 변경은 닫혀 있음


<br>

### IoC, DI, 컨테이너
<hr>

- **제어의 역전 IoC(Inversion of Control)**
    - 기존 프로그램은 클라이언트 구현 객체가 스스로 필요한 서버 구현 객체를 생성/연결/실행함 
        - 구현 객체가 프로그램의 제어 흐름을 스스로 조종
    - `AppConfig`의 등장 이후 구현 객체는 자신의 로직을 실행하는 역할만 담당
        - 프로그램의 제어 흐름은 `AppConfig`가 가져감
    - <U>프로그램의 제어 흐름을 직접 제어하는 것이 아닌 외부에서 관리하는 것</U>을 제어의 역전(IoC)이라고 함

<details>
    <summary>프레임워크와 라이브러리</summary>
    <div markdown="1">
        - 내가 작성한 코드를 제어하고 대신 실행 -> 프레임워크 (JUnit)
        <br>
        - 내가 작성한 코드가 직접 제어의 흐름을 담당 -> 라이브러리
    </div>
    </details>

- **의존 관계 주입 DI(Dependency Injection)**
    - 애플리케이션 실행 시점(런타임)에 외부에서 실제 구현 객체를 생성하고 클라이언트에 전달해서 클라이언트와 서버의 실제 의존 관계가 연결되는 것
    - 클라이언트 코드를 변경하지 않고 클라이언트가 호출하는 대상의 타입 인스턴스를 변경
    - 클래스 의존 관계를 변경하지 않고 동적인 객체 인스턴스 의존 관계를 쉽게 변경
    - 정적인 클래스 의존 관계
        - 클래스가 사용하는 import 코드만 보고 쉽게 판단
        - 애플리케이션을 실행하지 않아도 분석 가능
    - 동적인 객체(인스턴스) 의존 관계
        - 애플리케이션 실행 시점에 생성된 객체 인스턴스의 참조가 연결된 의존 관계
- **DI 컨테이너**
    - AppConfig처럼 객체를 생성하고 관리하며 의존 관계를 연결해는 것
    - IoC 컨테이너라고도 함

<br>

### 스프링으로 전환하기

<hr>

- ApplicationContext를 스프링 컨테이너라고 함
- 기존에는 개발자 `AppConfig`를 사용해서 직접 객체를 생성하고 DI를 했지만, 이제부터 스프링 컨테이너를 통해 사용
- 스프링 컨테이너는 `@Configuration`이 붙은 `AppConfig`를 설정 정보로 사용
    - `@Bean`이라 적힌 메서드를 모두 호출하여 반환된 객체를 스프링 컨테이너에 등록
    - 스프링 컨테이너에 등록된 객체를 스프링 빈이라고 함
- 이전에는 개발자가 필요한 객체를 `AppConfig`를 사용해 직접 조회했으나 이제부터는 스프링 컨테이너를 통해 필요한 스프링 빈(객체)를 찾아야 함
- 기존에는 개발자가 자바 코드로 모든 것을 했다면 이제부터는 스프링 컨테이너에 객체를 스프링 빈으로 등록하고, 스프링 컨테이너에서 스프링 빈을 찾아서 사용하도록 변경됨