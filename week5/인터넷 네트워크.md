## 09 | 인터넷 네트워크

[1. IP(인터넷 프로토콜)](#ip인터넷-프로토콜) <br>
[2. TCP, UDP](#tcp-udp) <br>
[3. TCP(Transmission Control Protocl) - 전송 제어 프로토콜](#tcptransmission-control-protocl---전송-제어-프로토콜) <br>
[4. UDP(User Datagram Protocol) - 사용자 데이터그램 프로토콜](#udpuser-datagram-protocol---사용자-데이터그램-프로토콜) <br>
[5. PORT](#port) <br>
[6. DNS(Domain Name System) - 도메인 네임 시스템](#dnsdomain-name-system---도메인-네임-시스템) <br>
<br>

<br>

### IP(인터넷 프로토콜)
<hr>

#### **IP의 역할**
>클라이언트와 서버에 IP 주소를 부여


- 지정한 IP 주소(IP Address)에 데이터 전달
- *패킷(Packet)* 이라는 통신 단위로 데이터 전달
    - *출발지 IP 주소*
    - *목적지 IP 주소*
    - *전달할 데이터, 기타 등*
- 클라이언트, 서버 모두 IP 주소가 있어야함
- 클라이언트, 서버의 패킷 전달 경로는 서로 다를 수 있음

#### **IP 프로토콜의 한계**
- 비연결성 : 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송
    - 클라이언트는 대상 서버가 패킷을 받을 수 있는 상태인지 모름
- 비신뢰성 : 중간에 패킷이 사라지거나 패킷이 순서대로 안올 수 있음
- 프로그램 구분 : 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 여러 개일 경우 구분할 필요가 있음

<br>

### TCP, UDP
<hr>

#### **인터넷 프로토콜 스택의 4계층**
- 애플리케이션 계층 (HTTP, FTP)
- 전송 계층 (TCP, UDP)
- 인터넷 계층 (IP)
- 네트워크 인터페이스 계층

#### **프로토콜**
- 컴퓨터나 원거리 통신 장비 사이에서 메시지를 주고 받는 양식과 규칙의 체계
- 프로토콜의 기본 요소
    - 구문(Syntax) : 전송하고자 하는 데이터의 형식(Format), 부호화(Coding), 신호 레벨(Signal Level) 등을 규정
    - 의미(Semantics) : 두 기기 간의 효율적이고 정확한 정보 전송을 위한 협조 사항과 오류 관리를 위한 제어 정보를 규정
    - 시간(Timing) : 두 기기 간의 통신 속도, 메시지의 순서 제어 등을 규정
 

<br>

**채팅 프로그램 사용 예제**
1. 프로그램이 "Hello world!" 메세지 생성
2. SOCKET 라이브러리를 통해 전달
3. TCP 정보 생성, 메세지 데이터 포함
4. IP 패킷 생성, TCP 데이터 포함
5. LAN 카드로 서버에 보냄(Ethernet frame)

<br>

- TCP/IP 패킷 정보 : IP 패킷 정보 안에 TCP 패킷 정보가 있음
- TCP 세그먼트 : 출발지 port, 목적지 port, 전송 제어, 순서, 검증 정보

<br>

### TCP(Transmission Control Protocl) - 전송 제어 프로토콜
<hr>

>신뢰할 수 있는 프로토콜

#### **TCP 특징**
- **연결 지향적** - 3 Way Handshake (가상 연결: 논리적으로만 연결한다)
- **데이터 전달 보증** - 클라이언트가 데이터를 보내면, 서버가 데이터를 받았다는 응답을 보냄으로써 데이터가 잘 전달되었는지 확인
- **순서 보장** - 클라이언트가 패킷 1, 2, 3을 순서대로 보냈을 때 서버가 1, 3, 2 순서로 패킷을 받았다면 2부터 다시 패킷을 보내라고 요청
- 현재는 대부분 TCP 사용
- *세그먼트*(Segment)라는 단위로 데이터를 전달하며 다음과 같은 정보 포함
    - 출발지 포트
    - 목적지 포트
    - 전송 제어 정보
    - 순서 정보
    - 검증 정보
    - 전달할 데이터, 기타 등

<br>

#### **TCP 3 Way Handshake**
![image](https://github.com/codusl100/spring_study/assets/77263479/09d2fa70-03d4-403f-a831-616414b2ae93)
1. 클라이언트가 서버에게 SYN(Synchronize)라는 접속 요청 메세지를 보냄
2. 클라이언트의 SYN 메세지를 받은 서버는 ACK(Acknowledgment)라는 요청 수락 메세지와 함께 SYN 메세지를 다시 클라이언트에 전송
3. 서버의 SYN + ACK 메세지를 받은 클라이언트가 다시 ACK 메세지를 보내고 서버에 도착하면 비로소 연결 완료
4. 이후엔 데이터를 주고 받을 수 있으며 3번의 ACK 메세지와 함께 데이터를 보내는 것도 가능


<br>

### UDP(User Datagram Protocol) - 사용자 데이터그램 프로토콜
<hr>

>기능이 거의 없어 하얀 도화지에 비유

#### **UDP 특징**
- 연결 지향 X
- 데이터 전달 보증 X
- 순서 보장 X
- 포트(Port)와 체크섬(Checksum) 정도만 추가
    - 포트 : 하나의 IP에서 여러 애플리케이션(게임, 음악 등)을 사용할 때 어떤 것이 게임용이고 어떤 것이 음악용 패킷인지 구분하는 역할
    - 체크섬 : 메세지에 대해 맞는지 검증해주는 데이터 정도 추가

<br>

#### **UDP 사용하는 이유**
- 기능이 적은 만큼 단순하고 빠름
- 애플리케이션 수준에서 커스텀하기 용이
- HTTP/3에서 TCP 대신 UDP 기반으로 구글이 개발한 QUIC를 사용

<br>

### PORT
<hr>

>같은 IP 내에서 프로세스를 구분

- 클라이언트에서 한번에 둘 이상의 서버와 연결할 때 구분하기 위해 사용
- IP 주소가 아파트라면 포트는 호수에 비유
- TCP/IP 패킷 정보에는 출발지 port와 목적지 port 포함
- 0~65535 할당 가능
- 0~1023 잘 알려진 포트, 사용하지 않는 것이 좋음
    - FTP - 20,21
    - TELNET - 23
    - HTTP - 80
    - HTTPS - 443

<br>

### DNS(Domain Name System) - 도메인 네임 시스템
<hr>


#### **DNS 사용 이유**
- IP 주소 외우기 어려움
- IP 주소는 변경될 수 있음

#### **DNS의 역할**
- 인터넷에서 전화번호부와 같은 역할
- 도메인 이름을 IP 주소로 변환

#### **DNS 동작 방식**
|도메인 이름|IP 주소|
|------|---|
|google.com|200.200.200.2|
|aaa.com|210.210.210.3|

- DNS 서버는 위와 같이 도메인 이름과 IP 주소가 매핑되는 테이블을 갖고 있음
- 클라이언트가 google.com이란 도메인 이름에 해당하는 IP 주소를 찾아달라고 요청하면 200.200.200.2 응답


<br>